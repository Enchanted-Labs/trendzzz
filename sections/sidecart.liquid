{% schema %}
{
  "name": "Sidecart",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "placeholder": "Je Winkelwagen",
      "default": "Je Winkelwagen",
      "label": "Winkelwagen titel"
    },
    {
      "type": "text",
      "id": "rewards_title",
      "placeholder": "Rewards",
      "default": "Rewards",
      "label": "Rewards titel"
    },
    {
      "type": "text",
      "id": "upsell-title",
      "default": "Get free express shipping by adding:",
      "label": "Express Shipping title"
    },
    {
      "type": "text",
      "id": "subtotal-text",
      "default": "Subtotal",
      "label": "Top Tex"
    },
    {
      "type": "textarea",
      "id": "shipping_text",
      "placeholder": "Verzending",
      "default": "Verzending",
      "label": "Verzending titel"
    },
    {
      "type": "number",
      "id": "freeshipping_threshold",
      "default": 4000,
      "label": "Free shipping threshold"
    },
    {
      "type": "number",
      "id": "freegift_threshold",
      "default": 6000,
      "label": "Free gift threshold"
    },
    {
      "type": "number",
      "id": "shipping",
      "default": 499,
      "label": "Shipping price"
    },
    {
      "type": "textarea",
      "id": "maak_af",
      "default": "Eenmalige Deal!",
      "label": "Upsell Titel"
    },
    {
      "type": "textarea",
      "id": "total",
      "placeholder": "Totaal",
      "default": "Totaal",
      "label": "Totaal Text"
    },
    {
      "type": "textarea",
      "id": "checkout_btn",
      "placeholder": "Veilig Afrekenen",
      "default": "Veilig Afrekenen",
      "label": "ATC Button text"
    },
    {
      "id": "payments",
      "label": "Payment Icons",
      "type": "textarea",
      "default": "klarna,visa,master,american_express,maestro,shopify_pay,apple_pay,google_pay"
    }
  ],
  "blocks": [
   {
    "name": "Upsell",
    "type": "product",
    "settings": [
        {
            "type": "product",
            "id": "product",
            "label": "Upsell Product"
     },
             {
            "type": "text",
            "id": "button-label",
            "label": "Upsell Button Label"
     }
    ]
   }
  ]
}
{% endschema %}

<style>
  [jd-cloak] {
    display: none !important;
  }
</style>

<script>
  setTimeout(() => {
    [...document.querySelectorAll('[jd-cloak]')].forEach((el) => el.removeAttribute('jd-cloak'));
  }, 500);
</script>

<div class="sidebar_wrapper" jd-cloak>
  <div class="sidebar-container" data-ajax-cart-section>
    {% assign freeShippingPrice = section.settings.freeshipping_threshold | plus: 0 %}
    {% assign freeGiftPrice = section.settings.freegift_threshold | plus: 0 %}
    {% assign cartPriceCents = cart.total_price | plus: 0 %}
    {% assign giftProduct = section.settings.gift_product %}

    <div class="sidebar-cart">
      <div class="sidebar-top-bar">
        <div>
          <div class="text-xl cart_title">
            <span class="cart-title">{{ section.settings.title }}</span>
            <span class="cart-title gray"
              >(
              {{- cart.item_count }} items)</span
            >
          </div>


        </div>
        <div
          data-ajax-cart-toggle-class-button="js-my-cart-open | remove"
          class="sidebar-close-btn"
        >
          <img
            src="{{ 'close-icon.svg' | asset_url }}"
            loading="lazy"
            alt
            class="sidebar-close-icon"
          >
        </div>
      </div>
      <div class="sidebar-div" style="margin-top:16px">
        <div class="sidebar-info">
          <div class="text-s text-caps black-60-color letter-spacing-0-03em margin-bottom-16px side-cart-top-text">
            <span class="text-bold-side">üòç Great choice!</span> You‚Äôll love this!
          </div>

          {% assign width = cartPriceCents | times: 100 | divided_by: freeGiftPrice %}

          <div class="amount-bar-container">
            <div
              class="amount-bar"
              style="width:{{ width }}%;max-width:100%;{% if width >= 100 %}background-color:#34a853{% endif %}"
            ></div>
            
          </div>

          <span class="reward-text">
            {% if giftProduct != blank %}
              {% if freeGiftPrice <= cartPriceCents and freeShippingPrice <= cartPriceCents %}
                üéâ Congratulations you have unlocked free shipping!
              {% elsif freeGiftPrice > cartPriceCents and freeShippingPrice <= cartPriceCents %}
                üì¶ You are {{ freeShippingPrice | minus: cartPriceCents | money }} away from free shipping!
              {% else %}
              üì¶ You are {{ freeShippingPrice | minus: cartPriceCents | money }} away from free shipping!
              {% endif %}
            {% else %}
              {% if freeShippingPrice <= cartPriceCents %}
                üéâ Congratulations you have unlocked free shipping!
              {% else %}
              üì¶ You are {{ freeShippingPrice | minus: cartPriceCents | money }} away from free shipping!
              {% endif %}
            {% endif %}
          </span>
        </div>
      </div>
      <div class="cart-product-container">
        {% for item in cart.items %}
          <div class="cart-product-block">
            <div class="cart-product-info">
              <div class="cart-product-image-div">
                <img
                  src="{{ item.image | img_url: '80x80' }}"
                  loading="lazy"
                  alt
                  class="cart-product-image"
                >
                <a
                  class="remove-product-btn"
                  data-ajax-cart-request-button
                  href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0"
                  ><img
                    src="{{ 'Trash.svg' | asset_url }}"
                    loading="lazy"
                    alt
                    class="remove-product-icon"
                ></a>
              </div>
              <div>
                <div class="text-m text-bold">{{ item.title }}</div>
                <div style="display:flex;gap:4px;align-items:center">
                  {% if item.product.compare_at_price %}
                    <div class="side-cart-compare-at-price">
                      {{ item.product.compare_at_price | times: item.quantity | money }}
                    </div>
                  {% endif %}
                  <div class="side-cart-price">
                    {{ item.final_line_price | money }}
                  </div>
                  <div class="cart-save-badge">
                    SAVE
                    {{
                      item.product.compare_at_price
                      | times: item.quantity
                      | minus: item.final_line_price
                      | money_without_trailing_zeros
                      | replace: '-', ''
                    }}
                  </div>
                </div>
              </div>
            </div>
            <div class="product-bar-plus-minus-button">
              <a
                class="product-bar-minus-button"
                data-ajax-cart-request-button
                href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity={{ item.quantity | minus: 1 }}"
              >
                <div>-</div>
              </a>
              <input
                class="product-quantity-input"
                name="updates[]"
                type="text"
                data-ajax-cart-quantity-input="{{ forloop.index }}"
                value="{{ item.quantity }}"
              >
              <a
                class="product-bar-plus-button"
                data-ajax-cart-request-button
                href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity={{ item.quantity | plus: 1 }}"
              >
                <div>+</div>
              </a>
            </div>
          </div>
        {% endfor %}
      </div>

<div class="slide-upsell_wrapper">
      <div class="cart-upsell-container">
        <div class="cart-slide-upsell_title">
        <p>{{section.settings.upsell-title}}</p>
        </div>
        <div class="swiper cart-swiper">
        <div class="swiper-wrapper cart-slide-upsell">
            {% for block in section.blocks %}
                {% case block.type %}
                  {% when 'product' %}
                    {%- assign product = all_products[block.settings.product] -%}
                    {% capture upsell-discount %}
                      {{ product.compare_at_price | minus: product.price | money_without_trailing_zeros }}
                    {% endcapture %}
          <div class="swiper-slide cart-upsell-block slide-cart-block">
            <div class="cart-upsell-wrapper"><img src="{{product.featured_image | img_url: 'master'}}" loading="lazy" alt="" class="cart-upsell-image">
              <div class="upsell-info-wrapper">
                <div class="text-m text-bold">{{product.title}}</div>
                <div class="cart-price-wrapper">
                  <p class="card-discount-p-2">{{product.compare_at_price | money}}</p>
                  <p class="cart-price-p">{{product.price | money}}</p>
                  <div class="cart-price-save upsell">SAVE {{ upsell-discount }}</div>
                </div>
              </div>
            </div>
              <form method="post" action="/cart/add" class="collection-atc_form slide-cart-form">
                <input type="hidden" name="id" value="{{ product.variants.first.id }}"/>
                <input min="1" type="hidden" id="quantity" name="quantity" value="1"/>
                <button type="submit" class="upsell-atc w-inline-block text-block-16 slide-cart-button" name="add">
                  {% if selected_variant.available == false %}
                    Sold out
                  {% else %}
                    <span class="slide-cart-button-label">{{block.settings.button-label}}</span>
                  {% endif %}
                </button>
              </form>
          </div>
        {% endcase %}
    {% endfor %}
        </div>
    </div>
    <div class="cart-pagination"></div>
      </div>
    </div>

      {% assign totalUpsells = 0 %}
      {% for item in cart.items %}
        {% if item.product.metafields.custom.product_cart_upsell != blank %}
          {% for upsell in item.product.metafields.custom.product_cart_upsell.value %}
            {% if upsell.available %}
              {% assign totalUpsells = totalUpsells | plus: 1 %}
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}

      {% if totalUpsells != 0 %}
        <div style="padding-bottom: 16px">
          <div id="upsellSlider" class="swiper-container upsellSlider">
            <div class="swiper-wrapper">
              {% for item in cart.items %}
                {% if item.product.metafields.custom.product_cart_upsell != blank %}
                  {% for upsell in item.product.metafields.custom.product_cart_upsell.value %}
                    {% if upsell.available %}
                      <div class="swiper-slide">
                        <div class="wrapper-for-upsells">
                          <div class="upsell-header">
                            {{ section.settings.maak_af }}
                          </div>
                          <div class="upsell-line"></div>
                          {% render 'product-card-upsell', product: upsell %}
                        </div>
                      </div>
                    {% endif %}
                  {% endfor %}
                {% endif %}
              {% endfor %}
            </div>

            <div class="upsell-pagination"></div>
          </div>
        </div>
      {% endif %}

      {% assign chosenDeal = section.settings.chosendeal %}

      {% assign upsell_in_cart = false %}

      {% for item in cart.items %}
        {% if item.title == chosenDeal.title %}
          {% assign upsell_in_cart = true %}
        {% endif %}
      {% endfor %}

      <div class="cart-payment-info">

        
        <div class="cart-payment-text-block">
            <div class="text-s text-bold">
                <div class="text-s text-bold">{{ section.settings.subtotal-text }}</div>
            </div>
                    
            
        <div class="text-s text-bold">
            <div class="text-s text-bold">{{ cartPriceCents | money }}</div>
        </div>
    </div>
        
        <div class="cart-payment-text-block">
             
            {% if cartPriceCents < freeShippingPrice %}
                <div class="text-s text-bold">
                    <div class="text-s text-bold">{{ section.settings.shipping_text }}</div>
                </div>
              {% else %}
                <div class="text-s text-bold">
                   <span class="shipping-cross">{{ section.settings.shipping_text }}</span> 
                </div>
              {% endif %}
          

          {% if cartPriceCents < freeShippingPrice %}
            <div class="text-s text-bold">
              {{ section.settings.shipping | money }}
            </div>
          {% else %}
            <div class="text-s text-bold">
               <span class="shipping-cross">{{ section.settings.shipping | money }}</span> 
            </div>
          {% endif %}
        </div>

        <div class="cart-payment-text-block">
          <div class="text-s text-bold">{{ section.settings.total }}</div>

          {% if cartPriceCents < freeShippingPrice %}
            <div class="text-s text-bold">
              {{ cartPriceCents | plus: section.settings.shipping | money }}
            </div>
          {% else %}
            <div class="text-s text-bold">{{ cartPriceCents | money }}</div>
          {% endif %}
        </div>

        <div class="cart-payment-text-block">
          <div class="text-s text-bold">Kortingscode?</div>
          <div class="text-s text-bold">Toevoegen tijdens checkout</div>
        </div>

        <a
          href="/checkout"
          class="cta-primairy even w-inline-block ATC-like-button"
          onclick="this.classList.toggle('ATC-like-button--loading')"
        >
          <span class="loader"></span>
          <div>{{ section.settings.checkout_btn }}</div>
          <div class="icon-embed-xsmall w-embed">
            <svg
              width="auto"
              height="auto"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8618 6.60177C19.5359 5.97049 18.7492 5.46855 17.6282 5.1766C16.7089 4.93728 15.1645 4.93564 14.2528 5.17316C12.1856 5.71148 11.3025 7.03381 12.282 8.12395C13.003 8.92644 14.0457 9.31488 15.645 9.37679C17.2513 9.43897 18.5047 9.11245 19.3579 8.40954C19.9608 7.91266 20.1633 7.1861 19.8618 6.60177ZM19.7866 12.0924C19.5088 11.6371 18.8357 11.1883 17.9769 10.8854C17.348 10.6636 17.2089 10.6474 15.9337 10.6474C14.6585 10.6474 14.5194 10.6636 13.8905 10.8854C12.6558 11.3208 11.9793 11.9327 11.8943 12.6913C11.7919 13.6043 12.6527 14.3951 14.1968 14.8064C16.2714 15.3592 18.7469 14.8489 19.6825 13.6756C20.0481 13.2172 20.0894 12.5885 19.7866 12.0924ZM14.7702 1.5928C14.293 0.623396 12.784 0.0043262 10.8879 2.64261e-05C9.34405 -0.00349939 8.17488 0.340562 7.42939 1.01776C6.97338 1.432 6.81132 1.75034 6.81132 2.23208C6.81132 3.37176 8.388 4.29155 10.503 4.38563C12.574 4.47781 14.3035 3.8111 14.7907 2.73282C14.9937 2.28333 14.9894 2.03791 14.7702 1.5928ZM14.8255 17.3618C14.6544 16.8828 14.2254 16.4778 13.5391 16.1471C11.1894 15.0149 7.49729 15.6832 6.86203 17.3557C6.6525 17.9074 6.80028 18.3841 7.33719 18.8892C7.84092 19.3629 8.27998 19.5911 9.12024 19.8159C9.96263 20.0412 11.5663 20.0636 12.395 19.8615C14.1901 19.4238 15.1937 18.3916 14.8255 17.3618ZM10.7534 9.41317C10.4894 7.36695 9.42837 5.85105 7.29597 4.47351C5.37378 3.23167 3.00619 2.50933 1.67445 2.75836C0.349198 3.0062 -0.243128 4.06573 0.106143 5.56383C0.1826 5.89155 0.434292 6.59575 0.665543 7.12857C1.29379 8.57636 1.43772 9.11477 1.43772 10.0167C1.43772 10.9821 1.29841 11.5284 0.700949 12.9059C0.441134 13.5048 0.169772 14.2469 0.0977622 14.555C-0.172402 15.7121 0.123932 16.6503 0.905517 17.1122C1.29088 17.34 1.35861 17.3507 2.37846 17.3452C3.66232 17.3381 4.4362 17.1346 5.9472 16.4066C8.54416 15.1556 10.2189 13.3776 10.6185 11.4474C10.8001 10.57 10.835 10.0451 10.7534 9.41317Z" fill="currentcolor"></path>
            </svg>
          </div>
        </a>

        <div class="payment-container">
          {% assign enabled_payment_types = section.settings.payments | remove: ' ' | split: ',' %}

          {%- for type in enabled_payment_types -%}
            {{ type | payment_type_svg_tag: class: 'payment-cart icon--full-color' }}
          {%- endfor -%}
        </div>
      </div>
    </div>
    <div
      data-ajax-cart-toggle-class-button="js-my-cart-open | remove"
      class="sidebar-bg"
    ></div>
  </div>
</div>

<script>
    var swiper = new Swiper(".cart-swiper", {
        pagination: {
          el: ".cart-pagination",
          clickable: true
        },
      });
</script>

<style>
  .pointer {
    cursor: pointer;
  }

  .swiper-container {
    overflow: visible !important;
  }

  .sidebar-container {
    display: flex;
    opacity: 0;
    visibility: hidden;
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
  }

  .sidebar-container .sidebar-cart {
    transform: translate(100%);
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 0;
  }

  .cart-payment-info {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 9;
  }

  .cart-product-block {
    opacity: 1;
    transition: opacity 0.2s;
  }

  .full-width {
    width: 100%;
  }

  .amount-bar {
    border-radius: 100px;
  }

  .amount-bar-container {
    background-color: #e8e5df;
    margin: 0.5rem 0px;
  }

  .product-quantity-input {
    text-align: center;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: none;
    width: 24px;
    background-color: transparent;
    font-size: 16px;
    font-weight: 700;
    font-family: Gilroy, sans-serif;
  }

  .swiper-container {
    overflow: unset;
  }

  .wrapper-for-upsells {
    background-color: #faeced;
    padding: 16px;
    width: 100%;
  }

  #upsellSlider {
    padding: 0 32px 20px 32px;
    margin-bottom: 0;
  }

  .text-underline {
    text-decoration: underline;
  }

  .white-color {
    color: #fff;
  }

  .swiper-container {
    width: 100%;
  }

  .letter-spacing-0-03em {
    letter-spacing: 0.03em;
  }

  .payment-container {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    margin-right: auto;
    margin-left: auto;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-column-gap: 8px;
  }

  .product-bar-plus-minus-button {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    overflow: hidden;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    color: #270e24;
    border-radius: 13px;
    background-color: #fff;
    font-size: 18px;
    line-height: 24px;
    font-weight: 700;
    letter-spacing: -0.03em;
    border: 1px solid #EDEEF0;
  }

  .product-bar-minus-button {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    height: 56px;
    padding-right: 10px;
    padding-left: 18px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    cursor: pointer;
  }

  .product-bar-plus-button {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    height: 56px;
    padding-right: 18px;
    padding-left: 10px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    cursor: pointer;
  }

  .sidebar-cart {
    position: relative;
    left: auto;
    top: 0%;
    right: 0%;
    bottom: 0%;
    z-index: 10;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    overflow-y: scroll;
    overflow-x: hidden;
    width: 576px;
    height: 100vh;
    max-width: 100%;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    background-color: #fff;
  }

  .sidebar-top-bar {
    position: -webkit-sticky;
    position: sticky;
    top: 0px;
    z-index: 100;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding: 16px 32px;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    background-color: #fff;
  }

  .sidebar-close-btn {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 36px;
    height: 36px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    border-style: solid;
    border-width: 1px;
    border-color: #edeef0;
    border-radius: 50%;
    cursor: pointer;
  }

  .sidebar-close-icon {
    width: 24px;
    height: 24px;
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    transform: rotate(45deg);
  }

  .sidebar-div {
    padding-right: 32px;
    padding-left: 32px;
  }

  .sidebar-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding: 12px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    grid-row-gap: 8px;
    border-radius: 12px;
    background-color: #f9f7ef;
  }

  .sidebar-payment-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    justify-content: center;
  }

  .amount-bar-container {
    overflow: hidden;
    height: 8px;
    border-radius: 22px;
  }

  .amount-bar {
    width: 100%;
    height: 100%;
    background-color: #514135;
  }

  .cart-product-container {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding: 16px 32px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    grid-row-gap: 10px;
  }

  .cart-product-block {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding-top: 16px;
    padding-bottom: 16px;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    box-shadow: inset 0 -1px #edeef0;
  }

  .cart-product-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-column-gap: 10px;
  }

  .cart-product-image-div {
    position: relative;
  }

  .cart-product-image {
    width: 56px;
    height: 56px;
    min-width: 56px;
    min-height: 56px;
    border-style: solid;
    border-width: 1px;
    border-color: #edeef0;
    border-radius: 50%;
  }

  .remove-product-btn {
    position: absolute;
    left: -6px;
    top: -6px;
    right: auto;
    bottom: auto;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 24px;
    height: 24px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    border-style: solid;
    border-width: 1px;
    border-color: #e5e6e9;
    border-radius: 50%;
    background-color: #fff;
    cursor: pointer;
  }

  .remove-product-icon {
    width: 14px;
    height: 14px;
  }

  .cart-product-mysterybox {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding: 24px 32px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    -ms-flex-align: start;
    align-items: flex-start;
    grid-row-gap: 16px;
    background-color: #070e1b;
  }

  .cart-mysterybox-block {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    grid-column-gap: 12px;
  }

  .cart-mysterybox-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-column-gap: 10px;
  }

  .cart-mysterybox-image {
    width: 64px;
    height: 64px;
    min-height: 64px;
    min-width: 64px;
    border-radius: 50%;
  }

  .mysterybox-add-button {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 64px;
    height: 64px;
    min-height: 64px;
    min-width: 64px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    border-radius: 50%;
    background-color: #679d34;
    color: #fff;
    font-weight: 700;
    text-align: center;
    cursor: pointer;
  }

  .cart-payment-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding: 32px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-row-gap: 16px;
    background-color: #f9f7ef;
  }

  .cart-payment-text-block {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
  }

  .cart-button {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    padding: 16px 16px 16px 28px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-column-gap: 18px;
    border-radius: 16px;
    background-color: #d9dbde;
    color: #070e1b8f;
    font-size: 16px;
    font-weight: 700;
  }

  .cart-button-icon {
    width: 18px;
    opacity: 0.56;
  }

  .sidebar-container {
    position: fixed;
    left: 0%;
    top: 0%;
    right: 0%;
    bottom: 0%;
    z-index: 1000;
    display: none;
    width: 100vw;
    height: 100vh;
    -webkit-box-pack: end;
    -webkit-justify-content: flex-end;
    -ms-flex-pack: end;
    justify-content: flex-end;
    background-color: #0006;
    opacity: 0;
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
  }

  .sidebar-bg {
    position: absolute;
    left: 0%;
    top: 0%;
    right: 0%;
    bottom: 0%;
  }

  @media screen and (max-width: 991px) {
    .payment-container {
      position: static;
    }

    .sidebar-top-bar {
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }

  @media screen and (max-width: 767px) {
    .sidebar-top-bar {
      padding: 16px 24px;
    }

    .sidebar-div,
    .cart-product-container,
    .cart-product-mysterybox {
      padding-right: 24px;
      padding-left: 24px;
    }

    #upsellSlider {
      padding-left: 16px;
      padding-right: 16px;
    }

    .cart-mysterybox-image,
    .mysterybox-add-button {
      width: 48px;
      height: 48px;
      min-height: 48px;
      min-width: 48px;
    }

    .cart-payment-info {
      padding-right: 24px;
      padding-left: 24px;
    }
  }

  @media screen and (max-width: 479px) {
    .main-button {
      width: 100%;
    }

    .payment-icon {
      margin-right: 8px;
      margin-bottom: 8px;
    }

    .payment-container {
      display: block;
    }

    .product-bar-plus-minus-button {
      -webkit-box-pack: center;
      -webkit-justify-content: center;
      -ms-flex-pack: center;
      justify-content: center;
    }

    .product-bar-minus-button {
      height: 48px;
      -webkit-box-pack: start;
      -webkit-justify-content: flex-start;
      -ms-flex-pack: start;
      justify-content: flex-start;
      -webkit-box-flex: 1;
      -webkit-flex: 1;
      -ms-flex: 1;
      flex: 1;
    }

    .product-bar-plus-button {
      height: 48px;
      -webkit-box-pack: end;
      -webkit-justify-content: flex-end;
      -ms-flex-pack: end;
      justify-content: flex-end;
      -webkit-box-flex: 1;
      -webkit-flex: 1;
      -ms-flex: 1;
      flex: 1;
    }

    .sidebar-top-bar,
    .cart-product-container,
    .cart-product-mysterybox,
    .cart-payment-info {
      padding: 16px;
    }

    .sidebar-div {
      padding: 0px 16px;
    }

    .cart-button {
      width: 100%;
    }
  }

  .sidebar-container {
    display: flex;
    opacity: 0;
    visibility: hidden;
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
  }

  /* Show the floating cart if the 'js-my-cart-open' CSS class exists */
  .js-my-cart-open .sidebar-container {
    display: flex;
    opacity: 1;
    visibility: visible;
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
  }

  .sidebar-container.sidebar-bg {
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 0;
  }

  .js-my-cart-open .sidebar-bg {
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 1;
  }

  .sidebar-container .sidebar-cart {
    transform: translateX(100%);
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 0;
  }

  .js-my-cart-open .sidebar-cart {
    transform: translateX(0%);
    webkit-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -moz-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    -o-transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    transition: all 0.35s cubic-bezier(0.83, 0, 0.17, 1);
    opacity: 1;
  }

  @media screen and (max-width: 767px) {
    .swiper-image {
      max-height: 120px;
    }
  }

  .product-card-upsell-img {
    width: 80px;
    height: auto;
    margin: 0 8px;
  }

  .product-card-upsell-wrapper {
    align-items: flex-start;
    text-align: left;
    padding-top: 16px;
  }

  .product-card-upsell {
    flex-direction: row;
    align-items: center;
  }

  .swiper-block {
    position: relative;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    overflow: hidden;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    grid-row-gap: 16px;
    border-style: solid;
    border-width: 1px;
    border-color: #edeef000;
    border-radius: 12px;
    background-color: #fff;
    -webkit-transition: border-color 0.2s ease, box-shadow 0.2s ease;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    cursor: pointer;
    border-color: #edeef0;
    box-shadow: 0 4px 12px #0000000a;
  }

  .swiper-block:hover {
    border-color: #edeef0;
    box-shadow: 0 4px 12px #00000014;
  }

  .swiper-image {
    width: auto;
    max-height: 300px;
    object-fit: contain;
    margin: 16px 0;
  }

  .swiper-div {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding-right: 16px;
    padding-bottom: 16px;
    padding-left: 16px;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    text-align: center;
  }

  .swiper-star-grid {
    display: -ms-grid;
    display: grid;
    margin-bottom: 2px;
    grid-auto-columns: 1fr;
    -ms-grid-columns: 1fr 1fr 1fr 1fr 1fr;
    grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
    -ms-grid-rows: auto;
    grid-template-rows: auto;
  }

  .swiper-star {
    height: 18px;
  }

  .swiper-price-container {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    margin-top: 0px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    grid-column-gap: 8px;
  }

  .swiper-price-div {
    padding: 2px 12px;
    border-radius: 70px;
    background-color: #34a853;
    color: #fff;
    font-size: 12px;
    font-weight: 700;
    text-align: center;
  }

  .swiper-store-icon-div {
    position: absolute;
    left: auto;
    top: 16px;
    right: 16px;
    bottom: auto;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 48px;
    height: 48px;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    border-radius: 50%;
    background-color: {{ settings.colors_accent_1 }};
    box-shadow: inset 0 -6px #00000052;
    color: #fff;
    font-size: 18px;
    line-height: 24px;
    font-weight: 800;
    text-align: center;
    padding: 0;
  }

  .swiper-store-icon {
    width: 20px;
    height: 20px;
  }

  @media screen and (max-width: 767px) {
    .swiper-block {
      grid-row-gap: 8px;
    }

    .swiper-div {
      padding-right: 8px;
      padding-bottom: 8px;
      padding-left: 8px;
    }
  }

  #w-node-_10e4c92e-b458-31a5-2fe3-a23631ca829a-1328b10d,
  #w-node-_10e4c92e-b458-31a5-2fe3-a23631ca829b-1328b10d,
  #w-node-_10e4c92e-b458-31a5-2fe3-a23631ca829c-1328b10d,
  #w-node-_10e4c92e-b458-31a5-2fe3-a23631ca829d-1328b10d,
  #w-node-_10e4c92e-b458-31a5-2fe3-a23631ca829e-1328b10d {
    -ms-grid-column: span 1;
    grid-column-start: span 1;
    -ms-grid-column-span: 1;
    grid-column-end: span 1;
    -ms-grid-row: span 1;
    grid-row-start: span 1;
    -ms-grid-row-span: 1;
    grid-row-end: span 1;
  }

  .product-card-upsell-img {
    width: 80px;
    height: auto;
    margin: 0px 8px;
  }
  .product-card-upsell-wrapper {
    align-items: flex-start;
    text-align: left;
    padding-top: 16px;
    color: black;
  }

  .product-card-upsell {
    flex-direction: row;
  }

  .wrapper-for-upsells {
    padding-left: 16px;
  }

  .text-left {
    text-align: left;
  }

  .cart_title {
    font-size: 20px;
    line-height: 24px;
    text-align: left;
    margin-bottom: 8px;
  }
  .product-bar-plus-minus-button > a {
    color: #270e24;
  }

  .cart-product-block {
    opacity: 1;
    transition: opacity 0.2s;
  }

  /* Make the area with controls visually disabled */
  body.js-ajax-cart-request-in-progress .cart-product-block {
    opacity: 0.7;
  }

  .tag_reward_wrapper {
    display: flex;
    flex-direction: row;
    align-content: flex-start;
    gap: 8px;
  }

  .tag_reward {
    padding: 6px 12px;
    background: rgba(39, 14, 36, 0.12);
    border-radius: 24px;
    ont-style: normal;
    font-weight: 800;
    font-size: 12px;
    line-height: 20px;
    /* identical to box height, or 167% */
    text-transform: uppercase;
    color: #270e24;
    opacity: 0.64;
    display: inline-block;
    transition: all 0.25s ease-in-out;
  }

  .tag_reward.reward_added {
    background: #34a853;
    transition: all 0.25s ease-in-out;
    color: #fff;
    opacity: 1;
  }

  .cart-title {
    font-family: Gilroy, sans-serif;
    font-style: normal;
    font-weight: 700;
    font-size: 20px;
    line-height: 28px;
    text-transform: capitalize;
    color: #270e24;
  }

  .cart-title.gray {
    color: #a9acb2;
    font-weight: 500;
  }

  .cart-subtitle {
    font-family: 'Puppy Talk';
    font-style: normal;
    font-weight: 700;
    font-size: 16px;
    line-height: 24px;
    text-transform: capitalize;
    color: #242222;
  }

  .cart-subtitle.gray {
    color: #270e24;
    opacity: 0.6;
    font-weight: 500;
  }

  .wrapper-for-upsells {
    border-radius: 12px;
  }

  .upsell-pagination {
    position: absolute;
    bottom: 0;
    z-index: 999;
    left: 0;
    display: flex;
    justify-content: center;
  }

  .upsell-line {
    height: 1px;
    width: 100%;
    background-color: rgba(39, 14, 36, 0.08);
    margin: 12px 0;
  }

  .upsell-header {
    font-family: 'Puppy Talk';
    font-style: normal;
    font-weight: 700;
    font-size: 14px;
    line-height: 24px;
    color: #270e24;
  }

  .swiper-block {
    background-color: transparent;
    box-shadow: none;
  }

  .swiper-block:hover {
    background-color: transparent;
    box-shadow: none;
  }

  .side-cart-price {
    font-family: Gilroy, sans-serif;
    font-style: normal;
    font-weight: 800;
    font-size: 14px;
    line-height: 20px;
    text-transform: uppercase;
    color: #270e24;
  }

  .side-cart-compare-at-price {
    font-family: Gilroy, sans-serif;
    font-style: normal;
    font-weight: 500;
    font-size: 14px;
    line-height: 20px;
    text-decoration-line: line-through;
    text-transform: uppercase;
    color: rgba(39, 14, 36, 0.56);
  }

  .cart-save-badge {
    margin-left: 0px;
    padding: 2px 6px;
    border-radius: 100px;
    background-color: #f92766;
    color: #fff;
    font-size: 12px;
    line-height: 20px;
    font-weight: 800;
  }

  .reward-text {
    font-family: Gilroy, sans-serif;
    font-style: normal;
    font-weight: medium;
    font-size: 16px;
    line-height: 24px;
    text-transform: capitalize;
    color: #242222;
  }
</style>

<script>
  setInterval(() => {
    const el = document.querySelector('#upsellSlider');
    if (!el.swiper) {
      new Swiper(el, {
        // Optional parameters
        spaceBetween: 16,
        slidesPerView: 1,
        freeMode: false,
        loop: false,
        pagination: { el: '.upsell-pagination', type: 'bullets' },
        // Enable lazy loading
        lazy: true,
        keyboard: { enabled: true },
      });
    }
  }, 250);
</script>
